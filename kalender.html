<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Kalender Sederhana dengan Pilihan Bulan & Tahun</title>
  <style>
    :root{--bg:#f6f8fa;--card:#ffffff;--accent:#0ea5a4;--muted:#6b7280}
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:var(--bg); margin:0; padding:24px; color:#0f172a}
    .wrap{max-width:920px;margin:0 auto}
    .card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 6px 20px rgba(2,6,23,0.06)}
    header{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
    h1{font-size:18px;margin:0}
    .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-left:auto}
    button{background:var(--accent);color:white;border:none;padding:8px 10px;border-radius:8px;cursor:pointer;font-weight:600}
    .small{background:transparent;border:1px solid rgba(15,23,42,0.06);color:var(--muted);padding:6px 10px}
    select{padding:6px 10px;border-radius:8px;border:1px solid rgba(15,23,42,0.1);background:#f8fafc;font-weight:600}
    .month-year{font-weight:700;font-size:16px}
    .calendar{margin-top:14px}
    .weekdays{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;color:var(--muted);font-size:13px}
    .grid{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;margin-top:8px}
    .cell{min-height:86px;border-radius:8px;padding:8px;background:linear-gradient(180deg,rgba(2,6,23,0.01),transparent);position:relative}
    .cell.out{opacity:0.35}
    .cell.today{box-shadow:inset 0 0 0 2px rgba(14,165,164,0.18);border:1px solid rgba(14,165,164,0.15)}
    .date{position:absolute;top:8px;right:8px;font-weight:700}
    .events{margin-top:28px;font-size:13px;display:flex;flex-direction:column;gap:6px}
    .event{background:rgba(14,165,164,0.12);padding:6px 8px;border-radius:6px;color:#064e4a}
    .footer{margin-top:12px;color:var(--muted);font-size:13px}
    @media (max-width:640px){.cell{min-height:68px}.date{font-size:12px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <header>
        <h1>Kalender Sederhana</h1>
        <div class="controls">
          <button id="prev">‹</button>
          <select id="monthSelect"></select>
          <select id="yearSelect"></select>
          <button id="next">›</button>
          <button id="today" class="small">Hari Ini</button>
        </div>
      </header>

      <div class="calendar">
        <div class="weekdays" aria-hidden="true">
          <div>Min</div><div>Sen</div><div>Sel</div><div>Rab</div><div>Kam</div><div>Jum</div><div>Sab</div>
        </div>
        <div class="grid" id="grid"></div>
      </div>

      <div class="footer">Klik tanggal untuk menambahkan catatan/agenda kecil (disimpan sementara di localStorage browser).</div>
    </div>
  </div>

  <script>
    const grid = document.getElementById('grid');
    const prev = document.getElementById('prev');
    const next = document.getElementById('next');
    const todayBtn = document.getElementById('today');
    const monthSelect = document.getElementById('monthSelect');
    const yearSelect = document.getElementById('yearSelect');

    const namaBulan = ['Januari','Februari','Maret','April','Mei','Juni','Juli','Agustus','September','Oktober','November','Desember'];
    const thisYear = new Date().getFullYear();

    // isi dropdown bulan & tahun
    namaBulan.forEach((m,i)=>{
      const opt=document.createElement('option');
      opt.value=i;opt.textContent=m;monthSelect.appendChild(opt);
    });
    for(let y=thisYear-10;y<=thisYear+10;y++){
      const opt=document.createElement('option');opt.value=y;opt.textContent=y;yearSelect.appendChild(opt);
    }

    let view = new Date();
    const storageKey = 'simple-calendar-events';
    const events = JSON.parse(localStorage.getItem(storageKey) || '{}');

    function saveEvents(){ localStorage.setItem(storageKey, JSON.stringify(events)); }

    function startOfWeek(d){
      const dd = new Date(d.getFullYear(), d.getMonth(), d.getDate());
      const diff = dd.getDay();
      dd.setDate(dd.getDate() - diff);
      dd.setHours(0,0,0,0);
      return dd;
    }

    function render(){
      grid.innerHTML = '';
      const year = view.getFullYear();
      const month = view.getMonth();
      monthSelect.value = month;
      yearSelect.value = year;

      const firstOfMonth = new Date(year, month, 1);
      const start = startOfWeek(firstOfMonth);

      const cells = [];
      for(let i=0;i<42;i++){
        const d = new Date(start.getFullYear(), start.getMonth(), start.getDate() + i);
        cells.push(d);
      }

      const today = new Date();

      for(const d of cells){
        const cell = document.createElement('div');
        cell.className = 'cell';
        if(d.getMonth() !== month) cell.classList.add('out');
        if(sameDay(d, today)) cell.classList.add('today');

        const dateEl = document.createElement('div');
        dateEl.className = 'date';
        dateEl.textContent = d.getDate();
        cell.appendChild(dateEl);

        const evBox = document.createElement('div');
        evBox.className = 'events';
        const key = keyForDate(d);
        if(events[key]){
          for(const e of events[key]){
            const ev = document.createElement('div'); ev.className='event'; ev.textContent = e;
            evBox.appendChild(ev);
          }
        }
        cell.appendChild(evBox);

        cell.addEventListener('click', ()=>{
          const text = prompt('Catatan untuk ' + formatDateLong(d) + ':', (events[key] ? events[key].join(' | ') : ''));
          if(text === null) return;
          const trimmed = text.trim();
          if(trimmed === ''){ delete events[key]; } else { events[key] = trimmed.split('\n').map(s => s.trim()).filter(Boolean); }
          saveEvents();
          render();
        });

        grid.appendChild(cell);
      }
    }

    function sameDay(a,b){ return a.getFullYear()===b.getFullYear() && a.getMonth()===b.getMonth() && a.getDate()===b.getDate(); }
    function keyForDate(d){ return d.getFullYear() + '-' + String(d.getMonth()+1).padStart(2,'0') + '-' + String(d.getDate()).padStart(2,'0'); }
    function formatDateLong(d){ return d.getDate() + ' ' + namaBulan[d.getMonth()] + ' ' + d.getFullYear(); }

    prev.addEventListener('click', ()=>{ view = new Date(view.getFullYear(), view.getMonth()-1, 1); render(); });
    next.addEventListener('click', ()=>{ view = new Date(view.getFullYear(), view.getMonth()+1, 1); render(); });
    todayBtn.addEventListener('click', ()=>{ view = new Date(); render(); });

    monthSelect.addEventListener('change', ()=>{
      view = new Date(view.getFullYear(), parseInt(monthSelect.value), 1);
      render();
    });

    yearSelect.addEventListener('change', ()=>{
      view = new Date(parseInt(yearSelect.value), view.getMonth(), 1);
      render();
    });

    render();
  </script>
</body>
</html>
